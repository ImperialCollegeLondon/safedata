<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An overview of the safedata package â€¢ safedata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An overview of the safedata package">
<meta property="og:description" content="safedata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">safedata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/overview.html">An overview of the safedata package</a>
    </li>
    <li>
      <a href="../articles/using_safe_data.html">Using the `safedata` package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ImperialCollegeLondon/safedata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="overview_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An overview of the safedata package</h1>
                        <h4 data-toc-skip class="author">Andy Aldersley and David Orme</h4>
            
            <h4 data-toc-skip class="date">2022-08-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ImperialCollegeLondon/safedata/blob/HEAD/vignettes/overview.Rmd" class="external-link"><code>vignettes/overview.Rmd</code></a></small>
      <div class="hidden name"><code>overview.Rmd</code></div>

    </div>

    
    
<p>The <code>safedata</code> R package is designed to discover and work with data using the formatting and indexing API designed for the Stability of Altered Forest Ecosystems (SAFE) Project. The <a href="https://www.safeproject.net/" class="external-link">SAFE Project</a> is one the largest ecological experiments in the world, investigating the effects of human activities on biodiversity and ecosystem function in the Malaysian rainforest.</p>
<p>Research conducted at the SAFE Project encompasses expertise from many disciplines and institutions, each running interlinked projects that help to develop our understanding of ecology within changing environments. Data from the many activities conducted through the SAFE Project are curated and published to a community repository hosted at <a href="https://zenodo.org/communities/safe/" class="external-link">Zenodo</a>.The <code>safedata</code> package enables researchers to quickly and easily interface with these datasets.</p>
<div class="section level2">
<h2 id="the-safe-project-dataset-workflow">The SAFE Project dataset workflow<a class="anchor" aria-label="anchor" href="#the-safe-project-dataset-workflow"></a>
</h2>
<p>All researchers working at the SAFE Project are required to submit their project data to the <a href="https://zenodo.org/communities/safe/" class="external-link">SAFE Zenodo repository</a>. There are the following 3 stages to the publication process, with further details provided below.</p>
<ol style="list-style-type: decimal">
<li>The data needs to be <strong>formatted</strong> to meet a community standard and to include core metadata required by the project.</li>
<li>The data is <strong>validated</strong> to ensure that the formatting and metadata comply with the required standard.</li>
<li>Data that passes validation is <strong>published</strong> to the Zenodo data repository.</li>
<li>Metadata is indexed at the SAFE Project website and is accessible through a search API.</li>
</ol>
<div class="section level3">
<h3 id="data-format">Data format<a class="anchor" aria-label="anchor" href="#data-format"></a>
</h3>
<p>Datasets are submitted as Microsoft Excel spreadsheets, containing the following worksheets:</p>
<ul>
<li>
<strong>Summary</strong>: simple metadata (authors, access rights) about the dataset</li>
<li>
<strong>Taxa</strong>: a description of the Taxa reported in the dataset</li>
<li>
<strong>Locations</strong>: a description of all sampling locations in the dataset</li>
<li>
<strong>Data worksheets</strong>: the actual data tables, described in the <strong>Summary</strong> sheet</li>
</ul>
<p>The formatting details for each worksheet are described here: <a href="https://safedata-validator.readthedocs.io/en/latest/data_format/overview.html" class="external-link uri">https://safedata-validator.readthedocs.io/en/latest/data_format/overview.html</a></p>
<p>Once a dataset has been formatted, researchers can submit the dataset to the SAFE Project website for validation and publication.</p>
</div>
<div class="section level3">
<h3 id="dataset-validation">Dataset validation<a class="anchor" aria-label="anchor" href="#dataset-validation"></a>
</h3>
<p>Submitted datasets are validated using the Python program (<code>safedata_validator</code>)[<a href="https://github.com/ImperialCollegeLondon/safedata_validator" class="external-link uri">https://github.com/ImperialCollegeLondon/safedata_validator</a>]. This checks that the dataset format is correct and that all the required metadata is provided and consistent. When a dataset fails validation, a report is returned to the submitter to help revise the dataset, otherwise validated datasets are published to Zenodo.</p>
</div>
<div class="section level3">
<h3 id="data-publication">Data publication<a class="anchor" aria-label="anchor" href="#data-publication"></a>
</h3>
<p><a href="https://zenodo.org" class="external-link">Zenodo</a> is a scientific data repository backed by the CERN. Zenodo provides data <strong>communities</strong> that allow all of the SAFE Project datasets to be collated into a single collection ((<a href="https://zenodo.org/communities/safe/" class="external-link uri">https://zenodo.org/communities/safe/</a>). The publication process uses the metadata provided in the submitted file to automatically create a detailed description of the dataset. Zenodo also issues DOIs for published datasets and provides versioning and access control :</p>
<div class="section level4">
<h4 id="data-versioning">Data versioning<a class="anchor" aria-label="anchor" href="#data-versioning"></a>
</h4>
<p>Zenodo uses a <a href="https://help.zenodo.org/" class="external-link">DOI versioning</a> system that allows sets of dataset records to be grouped. When a dataset is published on Zenodo for the first time, two DOIs are registered:</p>
<ul>
<li>the <strong>record</strong> DOI, representing the specific version of the dataset, and</li>
<li>the <strong>concept</strong> DOI, representing all versions of the record.</li>
</ul>
<p>Subsequent versions of an upload are then logged under a new DOI. This means that multiple versions of a dataset can be stored and referenced clearly. The concept DOI refers to all versions of the dataset (and the DOI link resolves to the most recent version), while the version DOI refers to a particular instance.</p>
</div>
<div class="section level4">
<h4 id="dataset-access">Dataset access<a class="anchor" aria-label="anchor" href="#dataset-access"></a>
</h4>
<p>Datasets published to the SAFE Project community on Zenodo can have one of the following three access status:</p>
<ul>
<li>
<strong>Open</strong>: the dataset is open for download, or</li>
<li>
<strong>Embargoed</strong>: the dataset will become open at a given date in the future, or</li>
<li>
<strong>Restricted</strong>: accessing the dataset requires permission. Zenodo provides a mechanism to request permission from the SAFE Project, which will always be passed onto the specific dataset authors.</li>
</ul>
<p>In practice, restricted data is little used and a fourth â€˜Closedâ€™ status is not accepted for SAFE datasets. Note that a particular dataset concept may have a versions with a mixture of access statuses.</p>
</div>
</div>
<div class="section level3">
<h3 id="dataset-discovery-and-indexing">Dataset discovery and indexing<a class="anchor" aria-label="anchor" href="#dataset-discovery-and-indexing"></a>
</h3>
<p>The Zenodo website provides the ability to search the text of record descriptions, including a search tool specifically for the <a href="https://www.zenodo.org/communities/safe/search" class="external-link">SAFE Project community</a>. However, these searches are unstructured and do not cover all of the metadata contained within published datasets. The SAFE Project website therefore maintains a <a href="https://www.safeproject.net/api" class="external-link">search API</a> that allows structured queries to be performed on the following:</p>
<ul>
<li>
<strong><code>dates</code></strong>: the start and endpoints of data collection within a dataset,</li>
<li>
<strong><code>fields</code></strong>: the text and field type of fields within indidual data tables within a dataset,</li>
<li>
<strong><code>authors</code></strong>: the authors of datasets,</li>
<li>
<strong><code>text</code></strong>: a free text search of dataset, worksheet and field titles and descriptions.</li>
<li>
<strong><code>taxa</code></strong>: the taxa included in a dataset, and</li>
<li>
<strong><code>spatial</code></strong>: matching datasets by sampling location.</li>
</ul>
<p>In addition, the API provides a <strong><code>record</code></strong> endpoint that allows the full record metadata to be downloaded in JSON format.</p>
</div>
</div>
<div class="section level2">
<h2 id="safe-data-directories">SAFE data directories<a class="anchor" aria-label="anchor" href="#safe-data-directories"></a>
</h2>
<p>The <code>safedata</code> package stores downloaded datasets, record metadata and key index files within a data directory, which is used as a local repository of the datasets used by an individual researcher. The structure of the directory is critical to the operation of the package and the datasets themselves are under version control: users <strong>must not change</strong> the structure or the file contents of this directory.</p>
<p>The directory structure is as follows: three index files are stored in the root of the directory, which will also contain a folder named with the <strong>concept</strong> id number of each dataset that has been downloaded. These concept folders will then contain at least one subfolder giving named with the <strong>record</strong> number of a downloaded dataset. These subfolders will then contain the record files downloaded from Zenodo and a JSON format file containing the dataset metadata. The directory also contains a JSON format file that that records the base URL of the dataset index website.</p>
<p>For example:</p>
<pre><code>gazetteer.geojson
index.json
location_aliases.csv
url.json
1400561/1400562/1400562.json
1400561/1400562/Psomas_Ant_Pselaphine_SAFE_dataset.xlsx</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andy Aldersley, David Orme.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
